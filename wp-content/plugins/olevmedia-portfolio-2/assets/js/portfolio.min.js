jQuery(function(o){"use strict";function a(a){for(var t=0;t<a.length;t++)o(a[t].element).find(".ompf-desc-wrapper").css("height","auto")}function t(a){for(var t=[],e=[],i=-1,r=-1,n=0;n<a.length;n++){var s=a[n].position;s=s.y,s!=i&&(r++,t[r]=[],e[r]=0,i=s),t[r].push(n);var c=o(a[n].element).find(".ompf-desc").outerHeight();c>e[r]&&(e[r]=c)}var n,d;for(n=0;n<t.length;n++)for(d=0;d<t[n].length;d++){var f=o(a[t[n][d]].element).find(".ompf-desc-wrapper");f.css("height",e[n]+"px")}}function e(o,a){var t=o.data("appenedElemsCallbacks");if(t&&t.length)for(var e=0;e<t.length;e++)"function"==typeof t[e]&&t[e].call(null,a)}jQuery().isotopeOm&&o(".ompf-portfolio").not(".ompf-layout-random").not(".ompf-widget-mode").each(function(){function i(o){var a="";a=o.category_id?o.category_id:"all",o.paged&&1!=o.paged&&(a+="&"+o.paged),document.location.hash=a}function r(a){o("a",a).click(function(){var a={paged:o(this).data("page-number")},t=f.data("current-category-id");return t&&(a.category_id=t),n(a),!1})}function n(a){a.action="ompf_portfolio_ajax",a.portfolio_id=f.data("portfolio-post-id"),"category_id"in a&&a.category_id||!f.data("portfolio-category-id")||(a.category_id=f.data("portfolio-category-id")),a.pagination="pages",p&&p.abort(),f.stop(!0).fadeTo(300,.5),h.stop(!0).fadeTo(300,1),p=o.ajax({type:"POST",url:ajaxurl,data:a,dataType:"json"}).success(function(t){if(0==t.error){i(a),a.category_id?f.data("current-category-id",a.category_id):f.data("current-category-id",!1);var n=o(t.html).filter(".ompf-portfolio-thumb");f.isotopeOm("remove",f.find(".ompf-portfolio-thumb")),f.isotopeOm("insert",n),e(f,n),u.html(t.html_pagination),r(u)}}).always(function(){f.stop(!0).fadeTo(300,1),h.stop(!0).fadeOut(300)});var t=f.offset(),n=o(window).scrollTop();t.top<n&&(n=t.top-70,0>n&&(n=0),o("html, body").animate({scrollTop:n},"500","swing"))}function s(o){var a="";o.category_id&&(a=o.category_id),""!=a?document.location.hash=a:""!=document.location.hash.replace("#","")&&(document.location.hash="all")}function c(a){o("a",a).click(function(){var o=f.data("current-paged");"undefined"==typeof o&&(o=1),o++;var a={paged:o},t=f.data("current-category-id");return t&&(a.category_id=t),d(a),!1}),jQuery.waypoints&&setTimeout(function(){o("#ompf-loadmore-link",a).waypoint(function(){o(this).click()},{offset:"130%",triggerOnce:!0})},500)}function d(a){a.action="ompf_portfolio_ajax",a.portfolio_id=f.data("portfolio-post-id"),"category_id"in a&&a.category_id||!f.data("portfolio-category-id")||(a.category_id=f.data("portfolio-category-id")),a.pagination="scroll",p&&p.abort(),_.hide(),a.is_new_category?(f.stop(!0).fadeTo(300,.5),h.stop(!0).fadeTo(300,1)):w.stop(!0,!0).css({visibility:"visible"}).show(),p=o.ajax({type:"POST",url:ajaxurl,data:a,dataType:"json"}).success(function(t){if(0==t.error){s(a),f.data("current-paged",a.paged),a.category_id?f.data("current-category-id",a.category_id):f.data("current-category-id",!1);var i=o(t.html).filter(".ompf-portfolio-thumb");a.is_new_category?(f.isotopeOm("remove",f.find(".ompf-portfolio-thumb")),f.isotopeOm("insert",i)):f.append(i).isotopeOm("appended",i),e(f,i),_.html(t.html_pagination),c(_)}}).always(function(){a.is_new_category?(f.stop(!0).fadeTo(300,1),h.stop(!0).fadeOut(300)):w.css("visibility","hidden").slideUp(300),_.show()})}var f=o(this),l={itemSelector:".ompf-portfolio-thumb",transitionDuration:"0.5s"};f.hasClass("ompf-layout-fixed")?o.extend(l,{layoutMode:"fitRows"}):f.hasClass("ompf-layout-masonry")&&o.extend(l,{layoutMode:"masonry"}),f.isotopeOm(l),f.hasClass("ompf-layout-fixed")&&f.data("fit-height")&&f.hasClass("ompf-preview-layout-full")&&(f.isotopeOm("on","beforeLayout",function(o){a(o.items)}),f.isotopeOm("on","beforeAnimation",function(o){t(o.items)})),o(window).bind("load",function(){f.isotopeOm("layout")});var p=!1;if(f.hasClass("ompf-pagination-no")){var m=o(".ompf-portfolio-categories a");m.click(function(){if(o(this).hasClass("ompf-active"))return!1;m.removeClass("ompf-active"),o(this).addClass("ompf-active");var a=o(this).data("filter");return"undefined"==typeof a&&(a=""),l.filter=""!=a?".ompf-"+a:!1,f.isotopeOm(l),""==a&&(a="all"),document.location.hash=a,!1}),document.location.hash&&m.filter("[data-filter="+document.location.hash.replace("#","")+"]").click()}else if(f.hasClass("ompf-pagination-pages")){var m=o(".ompf-portfolio-categories a"),u=o("#ompf-pagination-holder"),h=o('<div class="ompf-ajaxloading" />').appendTo("body");if(document.location.hash){var g=document.location.hash.replace("#","").split("&");if(g[0]||g[1]){var y={};if(g[0]&&"all"!=g[0]){y.category_id=g[0];var v=m.filter("[data-category-id="+g[0]+"]");v.length&&(m.removeClass("ompf-active"),v.addClass("ompf-active"))}g[1]&&(y.paged=g[1]),n(y)}}m.click(function(){if(o(this).hasClass("ompf-active"))return!1;m.removeClass("ompf-active"),o(this).addClass("ompf-active");var a=o(this).data("category-id"),t={category_id:a};return n(t),!1}),r(u)}else if(f.hasClass("ompf-pagination-scroll")){var m=o(".ompf-portfolio-categories a"),_=o("#ompf-loadmore-holder"),w=o('<div class="ompf-loadmoreloading" />').insertBefore(_),h=o('<div class="ompf-ajaxloading" />').appendTo("body");m.click(function(){if(o(this).hasClass("ompf-active"))return!1;m.removeClass("ompf-active"),o(this).addClass("ompf-active");var a=o(this).data("category-id"),t={category_id:a,paged:1,is_new_category:!0};return d(t),!1});var C=!1;if(document.location.hash){var g=document.location.hash.replace("#","").split("&");if(g[0]){var v=m.filter("[data-category-id="+g[0]+"]");if(v.length){var y={};y.category_id=g[0],m.removeClass("ompf-active"),v.addClass("ompf-active"),y.is_new_category=!0,d(y),C=!0}}}C||c(_)}}),o(".ompf-responsive-embed").each(function(){var a=o(this).children(":first");if(a.length){var t=parseInt(a.attr("width")),e=parseInt(a.attr("height"));if(!isNaN(t)&&!isNaN(e)&&t>0&&e>0){var i=e/t;o(this).css("padding-bottom",100*i+"%")}}})});